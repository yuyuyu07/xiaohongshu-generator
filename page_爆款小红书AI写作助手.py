from langchain_ç»„ä»¶ import xiaohongshu_generator
import streamlit as st

# +------------------------------------------------------------------+
# |                            åˆ›å»º ç½‘é¡µç»„ä»¶                            |
# +------------------------------------------------------------------+
# ä¾§è¾¹æ  å¸ƒå±€
with st.sidebar:  # ä¾§è¾¹æ  å¸ƒå±€
    st_api_key = st.text_input("è¯·è¾“å…¥APIå¯†é’¥:", type="password")  # å¯†ç  è¾“å…¥æ¡† # è¿”å› æ–‡å­—
    st.markdown("[APIè·å–åœ°å€](https://ai.google.dev/gemini-api/docs?hl=zh-cn)")
    st.markdown("---")
    st.markdown("""
    ### å½“å‰æ¨¡å‹: 
    **gemini-2.0-flash**
    """)

# æ˜¾ç¤º å¤§æ ‡é¢˜
st.title("çˆ†æ¬¾å°çº¢ä¹¦å†™ä½œåŠ©æ‰‹ğŸ“")     # æ˜¾ç¤º å¤§æ ‡é¢˜
st_è¾“å…¥ = st.text_input("å†™å…¥ä¸»é¢˜")  # è¡Œæ–‡å­— è¾“å…¥æ¡†  # è¿”å› æ–‡å­—
st_æŒ‰é’® = st.button("å¼€å§‹å†™ä½œ")      # æŒ‰é’® äº¤äº’ # è¿”å› å¸ƒå°”å€¼ï¼ˆç‚¹å‡»Trueï¼Œä¸æŒ‰False)

# +------------------------------------------------------------------+
# |                             æäº¤å‰ æ£€æŸ¥                            |
# +------------------------------------------------------------------+
# æ£€æµ‹api_keyæ˜¯å¦è¾“å…¥:
if st_æŒ‰é’® and not st_api_key:  # å¦‚æœ ç‚¹å‡»æŒ‰é’® å¹¶æ²¡æœ‰ è¾“å…¥ AIPå¯†é’¥
    st.info("è¯·è¾“å…¥APIå¯†é’¥")  # æé†’ æç¤º
    st.stop()               # ç»ˆæ­¢ # ç±»ä¼¼break

# æ£€æµ‹è§†é¢‘ä¸»é¢˜æ˜¯å¦è¾“å…¥:
if st_æŒ‰é’® and not st_è¾“å…¥:   # å¦‚æœ ç‚¹å‡»æŒ‰é’® å¹¶æ²¡æœ‰ è¾“å…¥ ä¸»é¢˜
    st.info("è¯·è¾“å…¥æ–‡æ¡ˆä¸»é¢˜")  # æé†’ æç¤º
    st.stop()               # ç»ˆæ­¢ # ç±»ä¼¼break

# +------------------------------------------------------------------+
# |                              æäº¤                                 |
# +------------------------------------------------------------------+
# æäº¤ è°ƒç”¨è‡ªå®šä¹‰å‡½æ•°
if st_æŒ‰é’®:
    # åŠ è½½ç­‰å¾…æç¤º
    with st.spinner("AIæ­£åœ¨æ€è€ƒä¸­ï¼Œè¯·ç­‰å¾…..."):  # ä½¿ç”¨ st.spinner åˆ›å»ºä¸€ä¸ªåŠ è½½åŠ¨ç”»ï¼Œæç¤ºç”¨æˆ· AI æ­£åœ¨æ€è€ƒ # åªè¦ä»¥ä¸‹ä»£ç æ²¡æœ‰è¿è¡Œå®Œï¼Œå°±ä¼šä¸€ç›´æç¤ºæ­£åœ¨åŠ è½½
        ç»“æœ = xiaohongshu_generator(st_api_key,st_è¾“å…¥) # è°ƒç”¨å‡½æ•° è¿”å› ç»“æœ

    # æˆåŠŸ æç¤º
    st.success("å°çº¢ä¹¦æ–‡æ¡ˆç”ŸæˆæˆåŠŸ")   # æˆåŠŸ æç¤º
    st.divider()  # æ˜¾ç¤º åˆ†å‰²çº¿

    # +---------------------------------------------------+
    # |                    æ˜¾ç¤ºç”Ÿæˆå†…å®¹                      |
    # +---------------------------------------------------+
    # 2åˆ—å¸ƒå±€
    columns1, columns2 = st.columns(2)  # 3åˆ— å¸ƒå±€  # è¿”å› åˆ—è¡¨
    with columns1:  # ç¬¬ä¸€åˆ—
        # æ˜¾ç¤º ä¸»é¢˜
        st.subheader("ğŸ–å°çº¢ä¹¦ä¸»é¢˜")  # æ˜¾ç¤º å‰¯æ ‡é¢˜
        st.markdown("##### æ ‡é¢˜1")
        st.write(ç»“æœ.ä¸»_é¢˜[0])
        st.markdown("##### æ ‡é¢˜2")
        st.write(ç»“æœ.ä¸»_é¢˜[1])
        st.markdown("##### æ ‡é¢˜3")
        st.write(ç»“æœ.ä¸»_é¢˜[2])
        st.markdown("##### æ ‡é¢˜4")
        st.write(ç»“æœ.ä¸»_é¢˜[3])
        st.markdown("##### æ ‡é¢˜5")
        st.write(ç»“æœ.ä¸»_é¢˜[4])

    with columns2:  # ç¬¬äºŒåˆ—
        # æ˜¾ç¤º è„šæœ¬
        st.subheader("ğŸ“„å°çº¢ä¹¦æ–‡æ¡ˆ")  # æ˜¾ç¤º å‰¯æ ‡é¢˜
        st.write(ç»“æœ.å†…_å®¹)

# streamlit run page_çˆ†æ¬¾å°çº¢ä¹¦AIå†™ä½œåŠ©æ‰‹.py